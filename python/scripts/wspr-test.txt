#    Command lines are of this form:
#        Major command: [Params | Minor command] [param, param, ...]
#        Minor command/params are comma separated
#        
#    Comments start with # in the first column and can only extend over one line.
#        
#    Command types:
#      Control commands:
#        SEQ         # Start a sequence
#        ENDSEQ      # End of loop
#        TIME        # Start a time banded section
#        ENDTIME     # End a time banded section
#        PAUSE       # Pause the script file
#        MSG         # Output a message to the console
#        COMPLETE    # Script complete
#      Hardware commands:
#        LPF         # Commands related to the LPF filters
#        ANTENNA     # Commands related to antenna switching
#        LOOP        # Commands related to the loop switching and tuning
#        RADIO       # CAT commands to external radios
#      Software commands:
#        WSPR        # Commands related to WSPR
#        WSPRRYPI    # Commands related to WsprryPi        
#        FCD         # Commands related to the FunCubeDonglePro+
#    
#    Command lines:
#      Control commands:
#        SEQ: n      # Iterate to END n times. If n is -1 iterate for ever.
#        ENDSEQ:     # Loopback to last SEQ while iteration < n
#        TIME: start, end
#                    # The commands banded by TIME and ENDTIME to be executed only between start, end time in hours
#                    # 24 hour clock.
#        ENDTIME:     SKIP to ENDTIME if time criteria not met
#        PAUSE: n.n  # Pause execution for n.n seconds
#        MSG: message# Output the message
#        COMPLETE:   # End of script
#      Hardware commands:
#        LPF: band   # Where band is LPF-160/LPF-80/LPF-40 etc. Mapping is involved to relay activation.
#        ANTENNA: source, dest
#                    # Sets up a route between an antenna and a destination TX or RX capability.
#                    # e.g. 160-80m-loop, FCDPro+. Mapping is involved to relay activation.
#                    # see defs.py ANTENNA_TO_INTERNAL for antenna constants
#        LOOP: INIT, % low_setpoint, % high_setpoint, % motor_speed, driver max speed_factor
#                    # Initialise the loop tuner with offsets etc
#        LOOP: BAND, antenna, extension
#                    # Switch the loop to band, and extend the actuator to % extension.
#                    # see defs.py ANTENNA_TO_LOOP_INTERNAL for antenna constants
#        RADIO:  CAT, radio, com_port, baud_rate
#                    # Supported radios IC7100 | FT817, baud-rate. Must be executed to initiate CAT control.
#        BAND, MHz
#                    # Set the radio frequency to the WSPR frequency for BAND using CAT
#                MODE, LSB|USB|...
#                    # Set the radio mode using CAT
#      Software commands:
#        WSPR:   INVOKE                  # Invoke WSPR if not running. Must be running before any other WSPR command.
#                RESET                   # Reset
#                IDLE, on|off            # Set idle on/off, i.e stop RX/TX
#                BAND, B_160 etc ...     # Set band for reporting
#                TX, on|off              # Set TX to 20% or 0%
#                POWER, nn.nn, nn.nn     # Available, required. Adjust power output when using external radio TX
#                CYCLES, n               # Wait for n receive cycles
#                SPOT, on|off            # Set spotting on/off.
#        WSPRRY: WSPRRY_OPTIONS, option_list    # Selection of -p -s -f -r -x -o -t -n. Must be set before START.
#                WSPRRY_CALLSIGN, callsign      # Set callsign for tx data. Must be set before START.
#                WSPRRY_LOCATOR, locator        # Set locator for tx data. Must be set before START.
#                WSPRRY_PWR, power              # Set Tx power in dBm for tx data. Must be set before START.
#                WSPRRY_START, f1, f2, f3, ...  # Start WsprryPi with the given frequency sequence and settings.
#                WSPRRY_WAIT                    # Wait for WsprryPi to terminate
#                WSPRRY_KILL                    # Uncerimoneously kill WsprryPi (this may not work on Windows)
#                WSPRRY_STOP                    # Stop WsprryPI if running.
#        FCD:                            # Set FCDPro+ attributes using fcdctl program
#                FREQ, MHz               # Set the FCDPro+ frequency.
#                LNA, gain               # Set the FCDPro+ LNA gain, 0 == off, 1 == on.
#                MIXER, gain             # Set the FCDPro+ MIXER gain, 0 == off, 1 == on.
#                IF, gain                # Set the FCDPro+ IF gain, 0-59 dB.
#                STATUS                  # Show status

# SEQ test
# Iterate 10 timesd with a pause of 1s between iterations
#SEQ: 10
#PAUSE: 1.0
#ENDSEQ:

# Time banded tests
#MSG: Timeband test
#MSG: 10-11
#TIME: 10, 11
#MSG: Triggered
#ENDTIME:
#MSG: 11-12
#TIME: 11, 12
#MSG: Triggered
#ENDTIME:
#MSG: 12-14
#TIME: 12, 14
#MSG: Triggered
#ENDTIME:
#MSG: 00-23
#TIME: 00, 23
#MSG: Triggered
#ENDTIME:
#MSG: 00-00 24 hours
#TIME: 00, 00
#MSG: Triggered
#ENDTIME:


# LPF test
# Switch in each LPF filter in turn with a 2s pause between each
#LPF: LPF-160
#PAUSE: 2.0
#LPF: LPF-80
#PAUSE: 2.0
#LPF: LPF-40
#PAUSE: 2.0

# WsprryPi test
# Set options, callsign, locator and power
#WSPRRY: WSPRRY_OPTIONS, -s, -o
#WSPRRY: WSPRRY_CALLSIGN, G3UKB
#WSPRRY: WSPRRY_LOCATOR, IO92wf
#WSPRRY: WSPRRY_PWR, 10
# Start with the above and frequency list
#WSPRRY: WSPRRY_START, 160m, 0
# Wait for WsprryPi to exit before continuing
#WSPRRY: WSPRRY_WAIT

# FCDPro+ test
# Turn on all gains, set freq and display status
#FCD: LNA, on
#FCD: MIXER, on
#FCD: IF, 50
#FCD: FREQ, 7.1
#FCD: STATUS

# WSPR tests
# Run app
#WSPR: INVOKE
#PAUSE: 5.0
# IDLE test
#WSPR: IDLE, on
#PAUSE: 1.0
#WSPR: IDLE, off
#PAUSE: 1.0
# TX test
#WSPR: TX, on
#PAUSE: 1.0
#WSPR: TX, off
# POWER test
#WSPR: POWER, 10.0, 1.0
#PAUSE: 3.0
#WSPR: POWER, 10.0, 5.0
#PAUSE: 3.0
# SPOT test
#WSPR: SPOT, on
#PAUSE: 1.0
#WSPR: SPOT, off
#PAUSE: 1.0
# BAND test
#WSPR: BAND, B_160
#PAUSE: 1.0
#WSPR: BAND, B_80
#PAUSE: 1.0
#WSPR: BAND, B_40
#PAUSE: 5.0
# Reset test
#WSPR: RESET

# Antenna switching tests
#ANTENNA: A_EFD_80_10, SS_FCD_PRO_PLUS
#PAUSE: 2.0
#ANTENNA: A_EFD_80_10, SS_WSPRRYPI
#PAUSE: 2.0
#ANTENNA: A_EFD_80_10, SS_IC7100
#PAUSE: 2.0
#ANTENNA: A_LOOP, SS_WSPRRYPI
#PAUSE: 2.0
#ANTENNA: A_LOOP, SS_FCD_PRO_PLUS
#PAUSE: 2.0
#ANTENNA: A_LOOP, SS_IC7100
#PAUSE: 2.0

# Loop tuning tests
#LOOP: LOOP_INIT, 10, 900, 40, 400
#LOOP: LOOP_BAND, LOOP-160, 50
#PAUSE: 2.0
#LOOP: LOOP_BAND, LOOP-80, 80
#PAUSE: 2.0

# Radio CAT tests
#RADIO: CAT, IC7100, /dev/ttyACM0, 19200
#RADIO: BAND, B_160
#RADIO: MODE, usb

# End of script requires a COMPLETE for a tidy termination
COMPLETE: